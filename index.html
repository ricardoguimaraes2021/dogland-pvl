<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Controlo de Rações</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <header class="hero">
    <div class="hero__glass"></div>
    <div class="container hero__content">
      <div>
        <p class="eyebrow">Gestão simples de stock e movimentos</p>
        <div class="hero__actions">
          <button class="btn btn--primary" data-scroll="#movimentos">Ir para movimentos</button>
          <button class="btn btn--ghost" data-scroll="#racoes">Ir para rações</button>
          <button class="btn btn--primary" data-scroll="#dashboard">Ver dashboard</button>
        </div>
      </div>
      <div class="hero__card">
        <div class="stat">
          <span class="stat__label">Valor em stock</span>
          <strong class="stat__value" id="kpi-valor-stock">€0,00</strong>
        </div>
        <div class="stat">
          <span class="stat__label">Total vendas</span>
          <strong class="stat__value" id="kpi-total-vendas">€0,00</strong>
        </div>
        <div class="stat">
          <span class="stat__label">Lucro estimado</span>
          <strong class="stat__value" id="kpi-lucro">€0,00</strong>
        </div>
        <p class="muted">Atualiza os dados em tempo real a partir da base de dados.</p>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="dashboard" class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Resumo</p>
          <h2>Dashboard</h2>
        </div>
        <div class="section__actions">
          <div class="pill">Atualização: <span id="last-updated">--</span></div>
          <button class="btn btn--ghost btn--sm section__toggle" data-target="#dashboard">Minimizar</button>
        </div>
      </div>
      <div class="section__content">
      <div class="filters">
        <div class="field">
          <label for="filtro-dashboard-de">De</label>
          <input id="filtro-dashboard-de" type="date" />
        </div>
        <div class="field">
          <label for="filtro-dashboard-ate">Até</label>
          <input id="filtro-dashboard-ate" type="date" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button class="btn btn--ghost" id="btn-dashboard-mes">Este mês</button>
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button class="btn btn--ghost" id="btn-dashboard-limpar">Limpar período</button>
        </div>
      </div>
      <div class="cards">
        <article class="card">
          <h3>Valor em Stock</h3>
          <p class="card__value" id="card-valor-stock">€0,00</p>
          <span class="card__hint">Baseado no custo médio</span>
        </article>
        <article class="card">
          <h3>Total Comprado</h3>
          <p class="card__value" id="card-total-compras">€0,00</p>
          <span class="card__hint">Compras registadas (ENTRADA + COMPRA)</span>
        </article>
        <article class="card">
          <h3>Consumo no Período</h3>
          <p class="card__value" id="card-consumo">0 sacos</p>
          <span class="card__hint" id="card-consumo-hint">SAÍDA + VENDA/CONSUMO_CASA</span>
        </article>
      </div>
      <div class="panel">
        <div class="panel__header">
          <h3>Stock Atual</h3>
          <span class="panel__hint">Quantidade disponível por produto</span>
        </div>
        <div class="table" id="stock-table">
          <div class="table__row table__row--header">
            <span>Produto</span>
            <span>SKU</span>
            <span>Stock atual</span>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel__header">
          <h3>Produtos a Repor</h3>
          <span class="panel__hint">Stock atual ≤ stock mínimo</span>
        </div>
        <div class="table" id="restock-table">
          <div class="table__row table__row--header">
            <span>SKU</span>
            <span>Produto</span>
            <span>Stock atual</span>
            <span>Stock mínimo</span>
          </div>
        </div>
      </div>
      </div>
    </section>

    <section id="racoes" class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Catálogo</p>
          <h2>Rações</h2>
        </div>
        <div class="section__actions">
          <button class="btn btn--primary" id="btn-nova-racao">Nova ração</button>
          <button class="btn btn--ghost btn--sm section__toggle" data-target="#racoes">Minimizar</button>
        </div>
      </div>
      <div class="section__content">
      <div class="filters">
        <div class="field">
          <label for="filtro-racoes-texto">Pesquisa (SKU ou nome)</label>
          <input id="filtro-racoes-texto" type="text" placeholder="Ex: GOSBI, 8437..." />
        </div>
      </div>
      <div class="panel">
        <div class="table" id="racoes-table">
          <div class="table__row table__row--header">
            <span>SKU</span>
            <span>Produto</span>
            <span>Marca</span>
            <span>Peso</span>
            <span>Preço venda</span>
            <span>Stock atual</span>
            <span>Alerta</span>
            <span>Ações</span>
          </div>
        </div>
      </div>
      </div>
    </section>

    <section id="movimentos" class="section">
      <div class="section__header">
        <div>
          <p class="eyebrow">Operações</p>
          <h2>Movimentos</h2>
        </div>
        <div class="section__actions">
          <button class="btn btn--ghost" id="btn-novo-movimento">Novo movimento</button>
          <button class="btn btn--ghost btn--sm section__toggle" data-target="#movimentos">Minimizar</button>
        </div>
      </div>
      <div class="section__content">
      <div class="filters">
        <div class="field">
          <label for="filtro-movimentos-texto">Pesquisa (SKU ou produto)</label>
          <input id="filtro-movimentos-texto" type="text" placeholder="Ex: Junior, 8437..." />
        </div>
        <div class="field">
          <label for="filtro-movimentos-tipo">Tipo</label>
          <select id="filtro-movimentos-tipo">
            <option value="">Todos</option>
            <option value="ENTRADA">ENTRADA</option>
            <option value="SAÍDA">SAÍDA</option>
          </select>
        </div>
        <div class="field">
          <label for="filtro-movimentos-motivo">Motivo</label>
          <select id="filtro-movimentos-motivo">
            <option value="">Todos</option>
            <option value="COMPRA">COMPRA</option>
            <option value="VENDA">VENDA</option>
            <option value="CONSUMO_CASA">CONSUMO_CASA</option>
            <option value="AJUSTE">AJUSTE</option>
          </select>
        </div>
        <div class="field">
          <label for="filtro-movimentos-de">De</label>
          <input id="filtro-movimentos-de" type="date" />
        </div>
        <div class="field">
          <label for="filtro-movimentos-ate">Até</label>
          <input id="filtro-movimentos-ate" type="date" />
        </div>
      </div>
      <div class="panel">
        <div class="table" id="movimentos-table">
          <div class="table__row table__row--header">
            <span>Data</span>
            <span>Tipo</span>
            <span>Motivo</span>
            <span>SKU</span>
            <span>Qtd</span>
            <span>Custo</span>
            <span>Preço venda</span>
            <span>Ações</span>
          </div>
        </div>
        <div class="pagination" id="movimentos-pagination">
          <button class="btn btn--ghost btn--sm" id="mov-page-prev">Anterior</button>
          <span id="mov-page-info">Página 1</span>
          <button class="btn btn--ghost btn--sm" id="mov-page-next">Seguinte</button>
        </div>
      </div>
      </div>
    </section>
  </main>

  <div class="modal" id="modal-form">
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="modal-title">Novo registo</h3>
        <button class="btn btn--icon" id="modal-close">✕</button>
      </div>
      <form id="modal-body"></form>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <p>© 2026 Controlo de Rações — Interface web.</p>
      <p class="muted">Gestão de stock e movimentos com atualização contínua.</p>
    </div>
  </footer>

  <script src="app.js?v=20260122-1"></script>
</body>
</html>
